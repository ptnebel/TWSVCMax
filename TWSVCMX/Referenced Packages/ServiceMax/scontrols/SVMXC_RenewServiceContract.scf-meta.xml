<?xml version="1.0" encoding="UTF-8"?>
<Scontrol xmlns="http://soap.sforce.com/2006/04/metadata">
    <contentSource>HTML</contentSource>
    <description>S-control to renew an existing service contract</description>
    <encodingKey>UTF-8</encodingKey>
    <fileContent>ZnVuY3Rpb24gcHJvZ3Jlc3MocykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MnKS5pbm5lckhUTUwgPSBzOyB9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vIFNob3cgYSBwb3B1cCBjYWxlbmRhciBhZGphY2VudCB0byB0aGUgZGF0ZSBmaWVsZA0KLy8gVG9vIGJhZCB3ZSBjYW4ndCB1c2UgdGhlIHN0YW5kYXJkIGRhdGUgcG9wdXAgU0ZEQyB1c2VzDQpmdW5jdGlvbiBTVk1YQ19TaG93Q2FsKGN0bCwgZm9ybW5hbWUpDQp7DQogICAgb3BlblBvcHVwKCcvaG9tZS9jYWxlbmRhci5qc3A/Zm9ybT0nICsgZm9ybW5hbWUgKyAnJicgKyAnZmllbGQ9JyArIGN0bC5pZCArICcmbW89MCZjYWxsb25jaGFuZ2U9dHJ1ZScsDQogICAgCSdfYmxhbmsnLCAxODYsIDE3MCwNCgknd2lkdGg9MTg2LGhlaWdodD0xNzAscmVzaXphYmxlPXllcyx0b29sYmFyPW5vLHN0YXR1cz1ubyxzY3JvbGxiYXJzPW5vLG1lbnViYXI9bm8sZGlyZWN0b3JpZXM9bm8sbG9jYXRpb249bm8sZGVwZW5kYW50PXllcycsDQoJdHJ1ZSk7DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQpmdW5jdGlvbiBTVk1YQ19BY3RpdmF0ZVNlcnZpY2VDb250cmFjdChDb250cmFjdElkKQ0Kew0KICAgIFNWTVhDX1NDX0luaXRNZXNzYWdlTGlzdCgiU0NPTlNDMSIpOw0KDQogICAgU1ZNWENfU0NfU2V0TGFiZWxzKG51bGwpOw0KICAgIHZhciBDb250cmFjdElkU2F2ZSA9IENvbnRyYWN0SWQ7DQoNCiAgICB2YXIgc29xbCA9ICJTRUxFQ1QgSWQgRlJPTSBTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyBXSEVSRSBTVk1YQ19fUmVuZXdlZF9Gcm9tX19jID0gJyIgKyBDb250cmFjdElkICsgIiciOw0KICAgIHZhciBxdWVyeVJlc3VsdCA9IHNmb3JjZS5jb25uZWN0aW9uLnF1ZXJ5KHNvcWwpOyANCiAgICB2YXIgcmVjb3JkcyA9IHF1ZXJ5UmVzdWx0LmdldEFycmF5KCJyZWNvcmRzIik7DQogICAgaWYgKHJlY29yZHMubGVuZ3RoID4gMCkgew0KICAgICAgICBhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDMiKSk7DQogICAgICAgIHdpbmRvdy5jbG9zZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgdmFyIFJlbmV3ZWRGcm9tID0gQ29udHJhY3RJZDsNCiAgIA0KICAgIC8vIENoZWNrIGlmIHByZXZpb3VzIGNvbnRyYWN0cyBhcmUgYWN0aXZlLCBhbmQgZGVhY3RpdmF0ZSB0aGVtDQogICAgcHJvZ3Jlc3MoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDA0IikpOw0KICAgICAgd2hpbGUgKCAgKFJlbmV3ZWRGcm9tICE9ICIiKSAmJiAoUmVuZXdlZEZyb20gIT0gbnVsbCkgICkgDQogICAgCXsNCiAgICAJdmFyIHNvcWwgPSAiU0VMRUNUIFNWTVhDX19SZW5ld2VkX0Zyb21fX2MgRlJPTSBTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyBXSEVSRSBpZCA9ICciICsgQ29udHJhY3RJZCArICInIjsNCgl2YXIgcXVlcnlSZXN1bHQgPSBzZm9yY2UuY29ubmVjdGlvbi5xdWVyeShzb3FsKTsgDQoJdmFyIHJlY29yZHMgPSBxdWVyeVJlc3VsdC5nZXRBcnJheSgicmVjb3JkcyIpOw0KCWlmIChyZWNvcmRzLmxlbmd0aCA+IDApDQoJICAgIHsNCgkgICAgUmVuZXdlZEZyb20gPSByZWNvcmRzWzBdLmdldCgiU1ZNWENfX1JlbmV3ZWRfRnJvbV9fYyIpOw0KCSAgIGlmICggKFJlbmV3ZWRGcm9tICE9ICIiKSYmIChSZW5ld2VkRnJvbSAhPSBudWxsKSAgKQ0KCQl7DQoJCXZhciBjT2JqID0gbmV3IHNmb3JjZS5TT2JqZWN0KCJTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyIpOw0KCQljT2JqLklkID0gUmVuZXdlZEZyb207DQoJCWNPYmouU1ZNWENfX0FjdGl2ZV9fYyA9IDA7DQoJCXRyeSB7DQoJCSAgICB2YXIgcmV0ID0gc2ZvcmNlLmNvbm5lY3Rpb24udXBkYXRlKFtjT2JqXSk7DQoJCQkgaWYgKCFyZXRbMF0uZ2V0Qm9vbGVhbigic3VjY2VzcyIpKQ0KCQkJCQl7DQoJCQkJCWFsZXJ0KHJldFswXS5lcnJvcnMubWVzc2FnZSk7ICAgICAgICAgICAgICANCgkJCQkJcmV0dXJuOw0KCQkJCQl9DQoJCSAgICBDb250cmFjdElkID0gUmVuZXdlZEZyb207DQoJCSAgICB9DQoJCWNhdGNoKGVycm9yKSB7DQoJCSAgICBhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDEiKSArICJcbiIgKyBlcnJvcik7DQoJCSAgICB9DQoJCX0NCgkgICAgfQ0KCWVsc2UNCgkgICAgew0KCSAgICBSZW5ld2VkRnJvbSA9ICIiOw0KCSAgICB9DQoJfQ0KDQogICAgcHJvZ3Jlc3MoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDA1IikpOw0KICAgIHZhciBjT2JqID0gbmV3IHNmb3JjZS5TT2JqZWN0KCJTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyIpOw0KICAgIGNPYmouSWQgPSBDb250cmFjdElkU2F2ZTsNCiAgICBjT2JqLlNWTVhDX19BY3RpdmVfX2MgPSAxOw0KICAgIHRyeSB7DQoJdmFyIHJldCA9IHNmb3JjZS5jb25uZWN0aW9uLnVwZGF0ZShbY09ial0pOw0KCX0NCiAgICBjYXRjaChlcnJvcikNCgl7DQoJYWxlcnQoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDAxIikgKyAiXG4iICsgZXJyb3IpOw0KCX0NCiAgICB3aW5kb3cub3BlbmVyLmxvY2F0aW9uID0gIi8iICsgQ29udHJhY3RJZFNhdmU7DQogICAgd2luZG93LmNsb3NlKCk7DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCmZ1bmN0aW9uIFNWTVhDX0NhbmNlbFNlcnZpY2VDb250cmFjdChJc0FjdGl2ZSwgQ29udHJhY3RJZCwgVXNlcklkKQ0Kew0KICAgIFNWTVhDX1NDX0luaXRNZXNzYWdlTGlzdCgiU0NPTlNDMiIpOw0KICAgIFNWTVhDX1NDX1NldExhYmVscyhudWxsKTsNCiAgICBpZiAoSXNBY3RpdmUgPT0gMCkgew0KICAgICAgICBhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDMiKSk7DQogICAgICAgIHdpbmRvdy5jbG9zZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgdmFyIGFucyA9IGNvbmZpcm0oU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDA0IikpOw0KICAgIGlmICghYW5zKSB7DQogICAgICAgIHdpbmRvdy5jbG9zZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgcHJvZ3Jlc3MoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDA1IikpOw0KICAgIHZhciBjT2JqID0gbmV3IHNmb3JjZS5TT2JqZWN0KCJTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyIpOw0KICAgIGNPYmouSWQgPSBDb250cmFjdElkOw0KICAgIGNPYmouU1ZNWENfX0FjdGl2ZV9fYyA9IDA7DQogICAgY09iai5TVk1YQ19fQ2FuY2VsZWRfQnlfX2MgPSBVc2VySWQ7DQoJDQogICAgY09iai5TVk1YQ19fQ2FuY2VsZWRfT25fX2M9IFNWTVhDX0dldEN1cnJlbnRUaW1lKCk7DQogICAgdHJ5IHsNCgl2YXIgcmV0ID0gc2ZvcmNlLmNvbm5lY3Rpb24udXBkYXRlKFtjT2JqXSk7DQoJfQ0KICAgIGNhdGNoKGVycm9yKQ0KICAgIAl7DQoJYWxlcnQoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDAxIikgKyAiXG4iICsgZXJyb3IpOw0KCX0NCiAgICB3aW5kb3cub3BlbmVyLmxvY2F0aW9uID0gIi8iICsgQ29udHJhY3RJZDsNCiAgICB3aW5kb3cuY2xvc2UoKTsNCn0NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KZnVuY3Rpb24gU1ZNWENfR2V0QWRkcmVzcyhvYmpOYW1lLCBvYmpJZCkgLy9CeSBHTQ0Kew0KdHJ5ew0KCXZhciBzUXVlcnkgPScnOw0KCXZhciBhZGRyZXNzID0nJzsNCglzd2l0Y2gob2JqTmFtZSkNCiAgICB7DQoJCWNhc2UgIlNWTVhDX19JbnN0YWxsZWRfUHJvZHVjdF9fYyI6DQoJCQlzUXVlcnkgPSAiU2VsZWN0IFNWTVhDX19aaXBfX2MsIFNWTVhDX19TdHJlZXRfX2MsIFNWTVhDX19TdGF0ZV9fYywgU1ZNWENfX0NvdW50cnlfX2MsIFNWTVhDX19DaXR5X19jIEZyb20gU1ZNWENfX0luc3RhbGxlZF9Qcm9kdWN0X19jIHdoZXJlIGlkPSciKyBvYmpJZCArIiciOw0KCQkJYnJlYWs7DQoJCWNhc2UgIlNWTVhDX19TaXRlX19jIjoNCgkJCXNRdWVyeSA9ICJTZWxlY3QgU1ZNWENfX1ppcF9fYywgU1ZNWENfX1N0cmVldF9fYywgU1ZNWENfX1N0YXRlX19jLCBTVk1YQ19fQ291bnRyeV9fYywgU1ZNWENfX0NpdHlfX2MgRnJvbSBTVk1YQ19fU2l0ZV9fYyB3aGVyZSBpZD0nIisgb2JqSWQgKyInIjsNCgkJCWJyZWFrOw0KCX0NCgkNCg0KCXZhciBxciA9IHNmb3JjZS5jb25uZWN0aW9uLnF1ZXJ5KHNRdWVyeSk7DQogICAgdmFyIHJlY3MgPSBxci5nZXRBcnJheSgicmVjb3JkcyIpOw0KICAgIGlmIChyZWNzLmxlbmd0aCA+IDApDQoJew0KCQl2YXIgciA9IHJlY3NbMF07DQoJCXN3aXRjaChvYmpOYW1lKQ0KICAgICAgICB7DQoJCQljYXNlICdTVk1YQ19fSW5zdGFsbGVkX1Byb2R1Y3RfX2MnOg0KCQkJCWlmKHIuU1ZNWENfX1N0cmVldF9fYykNCgkJCQkJYWRkcmVzcyArPSByLlNWTVhDX19TdHJlZXRfX2MgOw0KCQkJCWlmKHIuU1ZNWENfX0NpdHlfX2MpDQoJCQkJCWFkZHJlc3MgKz0gJywnICsgci5TVk1YQ19fQ2l0eV9fYyA7DQoJCQkJaWYoci5TVk1YQ19fU3RhdGVfX2MpDQoJCQkJCWFkZHJlc3MgKz0gJywnICsgci5TVk1YQ19fU3RhdGVfX2MgOw0KCQkJCWlmKHIuU1ZNWENfX1ppcF9fYykNCgkJCQkJYWRkcmVzcyArPSAnICcgKyByLlNWTVhDX19aaXBfX2MgOw0KCQkJCWlmKHIuU1ZNWENfX0NvdW50cnlfX2MpDQoJCQkJCWFkZHJlc3MgKz0gJywnICsgci5TVk1YQ19fQ291bnRyeV9fYyA7DQoJCQkJYnJlYWs7DQoJCQljYXNlICdTVk1YQ19fU2l0ZV9fYyc6DQoJCQkJaWYoci5TVk1YQ19fU3RyZWV0X19jKQ0KCQkJCQlhZGRyZXNzICs9IHIuU1ZNWENfX1N0cmVldF9fYyA7DQoJCQkJaWYoci5TVk1YQ19fQ2l0eV9fYykNCgkJCQkJYWRkcmVzcyArPSAnLCcgKyByLlNWTVhDX19DaXR5X19jIDsNCgkJCQlpZihyLlNWTVhDX19TdGF0ZV9fYykNCgkJCQkJYWRkcmVzcyArPSAnLCcgKyByLlNWTVhDX19TdGF0ZV9fYyA7DQoJCQkJaWYoci5TVk1YQ19fWmlwX19jKQ0KCQkJCQlhZGRyZXNzICs9ICcgJyArIHIuU1ZNWENfX1ppcF9fYyA7DQoJCQkJaWYoci5TVk1YQ19fQ291bnRyeV9fYykNCgkJCQkJYWRkcmVzcyArPSAnLCcgKyByLlNWTVhDX19Db3VudHJ5X19jIDsNCgkJCQlicmVhazsNCgkJfQ0KCX0gZWxzZSB3aW5kb3cuY2xvc2UoKTsgDQoJU1ZNWENfQ2FsY3VsYXRlTGF0TG9uKG9iak5hbWUsIG9iaklkLGFkZHJlc3MpOw0KfSBjYXRjaChlKSB7IGFsZXJ0KGUpO30NCn0NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gDQovL1ZhbGlkYXRlIEFkZHJlc3MgUm91dGluZSBSZXR1cm5zIHRoZSBMYXRpdHVkZSAmIGxvbmdpdHVkZSBjb29yZGluYXRlcyBmb3IgYSB2YWxpZCBhZGRyZXNzDQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovIA0KZnVuY3Rpb24gU1ZNWENfQ2FsY3VsYXRlTGF0TG9uKG9iamVjdE5hbWUsIG9iamVjdElkLEFkZHJlc3MpIA0KeyANCglTVk1YQ19TQ19Jbml0TWVzc2FnZUxpc3QoIlZBRFJTQzEiKTsNCgkvLyBTVk1YQ19TQ19TZXRMYWJlbHMobnVsbCk7DQoJU1ZNWENfU0NfU2V0TGFiZWxzKCdhZGRyJyk7DQoJDQoJDQoJbXlHZW9jb2RlciA9IG5ldyBHQ2xpZW50R2VvY29kZXIoKTsgDQoJaWYgKCFteUdlb2NvZGVyKSANCgl7IA0KCS8vCWFsZXJ0KCJVbmFibGUgdG8gbGF1bmNoIEdlb2NvZGVyIHRvIGNhbGN1bGF0ZSBjb29yZGluYXRlcy5cblBsZWFzZSBjb250YWN0IHlvdXIgU2VydmljZU1heCBhZG1pbmlzdHJhdG9yLiIpOyANCgkJYWxlcnQoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDAxIikpOw0KCQlyZXR1cm4gbnVsbDsgDQoJfSANCg0KCW15R2VvY29kZXIuZ2V0TG9jYXRpb25zKEFkZHJlc3MsIA0KCWZ1bmN0aW9uKHJlc3BvbnNlKSANCgl7IA0KCQlpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuU3RhdHVzLmNvZGUgPT0gMjAwKSANCgkJeyANCgkJCXZhciBwbGFjZSA9IHJlc3BvbnNlLlBsYWNlbWFya1swXTsgDQoJCQl2YXIgb2JqdXBkID0gbmV3IHNmb3JjZS5TT2JqZWN0KG9iamVjdE5hbWUpOyANCgkJCW9ianVwZC5JZCA9IG9iamVjdElkOyANCgkJCW9ianVwZC5TVk1YQ19fTGF0aXR1ZGVfX2MgPSBwbGFjZS5Qb2ludC5jb29yZGluYXRlc1sxXTsgDQoJCQlvYmp1cGQuU1ZNWENfX0xvbmdpdHVkZV9fYyA9IHBsYWNlLlBvaW50LmNvb3JkaW5hdGVzWzBdOyANCgkJCXRyeSB7IA0KCQkJCXZhciByZXQgPSBzZm9yY2UuY29ubmVjdGlvbi51cGRhdGUoW29ianVwZF0pOyANCgkJCQkvL2FsZXJ0KCJWYWxpZCBBZGRyZXNzISBMYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ISIpOyANCgkJCQlhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDIiKSk7DQoJCQl9IA0KCQkJY2F0Y2goZSkgeyBhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDMiKSArICJcbiIgKyBlKTsgfSANCgkJfSANCgkJZWxzZSANCgkJeyANCgkJCS8vCWFsZXJ0KCJVbmFibGUgdG8gY2FsY3VsYXRlIGNvb3JkaW5hdGVzIG9mIHRoaXMgYWRkcmVzcyFcbiIgKyAiUGxlYXNlIG1ha2Ugc3VyZSB0aGUgYWRkcmVzcyBpcyB2YWxpZCwgZG9lcyBub3QgY29udGFpbiBzdWl0ZS91bml0IG51bWJlcnMsIFxuIiArICJhbmQgZG9lcyBub3QgY29udGFpbiBQTyBCb3ggbnVtYmVycy4iKTsgDQoJCQlhbGVydChTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDQiKSArICJcbiIgKyBTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDUiKSArIlxuIiArIFNWTVhDX0dldE1lc3NhZ2UoIk1TRzAwNiIpKTsNCgkJfSANCi8vCQl3aW5kb3cucGFyZW50LmxvY2F0aW9uID0gIi8iICsgb2JqZWN0SWQ7IA0KCQl3aW5kb3cub3BlbmVyLmxvY2F0aW9uLnJlbG9hZCgpIA0KCQl3aW5kb3cuY2xvc2UoKTsgDQoJCX0gDQoJKTsgDQp9IA0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gDQoNCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KDQovLyBCdWlsZCBhIGdsb2JhbCBoYXNoIHRhYmxlIG9mIG1lc3NhZ2UgbnVtYmVycyBhbmQgbWVzc2FnZXMuDQovLyBUaGlzIGFycmF5IHdpbGwgYmUgdXNlZCBmb3IgZGlzcGxheWluZyBpbmZvL3dhcm5pbmcvZXJyb3IgbWVzc2FnZXMgdG8gdGhlIHVzZXIuDQpmdW5jdGlvbiBTVk1YQ19TQ19Jbml0TWVzc2FnZUxpc3Qoc3VibW9kdWxlaWQpDQp7DQogICAgdmFyIGZvdW5kID0gZmFsc2U7DQogICAgdmFyIExhbmdMaXN0ID0gbmV3IEFycmF5KCk7DQoNCiAgICAJCS8vIEhhc2ggKE1hcCkgb2YgU0ZEQyBsYW5ndWFnZSBJU08gY29kZSB0byBMYW5ndWFnZSBwaWNrbGlzdCBpbiBTZXJ2aWNlTWF4IHRhZ3Mgb2JqZWN0DQogICAgTGFuZ0xpc3RbImVuX1VTIl0gPSAiRW5nbGlzaCI7DQogICAgTGFuZ0xpc3RbImRlIl0gPSAiR2VybWFuIjsNCiAgICBMYW5nTGlzdFsiZXMiXSA9ICJTcGFuaXNoIjsNCiAgICBMYW5nTGlzdFsiZnIiXSA9ICJGcmVuY2giOw0KICAgIExhbmdMaXN0WyJpdCJdID0gIkl0YWxpYW4iOw0KICAgIExhbmdMaXN0WyJqYSJdID0gIkphcGFuZXNlIjsNCiAgICBMYW5nTGlzdFsic3YiXSA9ICJTd2VkaXNoIjsNCiAgICBMYW5nTGlzdFsia28iXSA9ICJLb3JlYW4iOw0KICAgIExhbmdMaXN0WyJ6aF9UVyJdID0gIkNoaW5lc2UgKFRyYWRpdGlvbmFsKSI7DQogICAgTGFuZ0xpc3RbInpoX0NOIl0gPSAiQ2hpbmVzZSAoU2ltcGxpZmllZCkiOw0KICAgIExhbmdMaXN0WyJwdF9CUiJdID0gIlBvcnR1Z3Vlc2UgKEJyYXppbGlhbikiOw0KICAgIExhbmdMaXN0WyJubF9OTCJdID0gIkR1dGNoIjsNCiAgICBMYW5nTGlzdFsiZGEiXSA9ICJEYW5pc2giOw0KICAgIExhbmdMaXN0WyJ0aCJdID0gIlRoYWkiOw0KICAgIExhbmdMaXN0WyJmaSJdID0gIkZpbm5pc2giOw0KICAgIExhbmdMaXN0WyJydSJdID0gIlJ1c3NpYW4iOw0KDQogICAgdmFyIFVzZXJMYW5nID0gc2ZvcmNlLmNvbm5lY3Rpb24uZ2V0VXNlckluZm8oKS51c2VyTGFuZ3VhZ2U7CS8vIElTTyBjb2RlIG9mIHRoZSB1c2VyJ3MgbGFuZ3VhZ2UNCg0KICAgIGlmICghTGFuZ0xpc3RbVXNlckxhbmddKSB7IFVzZXJMYW5nID0gIkVuZ2xpc2giOyB9CQkvLyBpZiB1c2VyJ3MgbGFuZ3VhZ2UgaXMgbm90IGZvdW5kLCBkZWZhdWx0IGl0IHRvIEVuZ2xpc2gNCiAgICBlbHNlIHsgVXNlckxhbmcgPSBMYW5nTGlzdFtVc2VyTGFuZ107IH0NCg0KICAgIHZhciBzb3FsID0gIlNFTEVDVCBJZCwgTmFtZSwgU1ZNWENfX1RhZ19UZXh0X19jLCBTVk1YQ19fTGFuZ3VhZ2VfX2MgIiArDQogICAgCQkiRlJPTSBTVk1YQ19fU2VydmljZU1heF9UYWdzX19jICIgKw0KCQkiV0hFUkUgU1ZNWENfX1N1Ym1vZHVsZUlEX19jID0gJyIgKyBzdWJtb2R1bGVpZCArICInICIgKw0KCQkiQU5EIFNWTVhDX19MYW5ndWFnZV9fYyBJTiAoJ01hc3RlcicsICciICsgVXNlckxhbmcgKyAiJykiOw0KICAgIHZhciBxciA9IHNmb3JjZS5jb25uZWN0aW9uLnF1ZXJ5KHNvcWwpOw0KICAgIHZhciB0YWdyZWNzID0gbmV3IHNmb3JjZS5RdWVyeVJlc3VsdEl0ZXJhdG9yKHFyKTsNCiAgICB3aGlsZSAodGFncmVjcy5oYXNOZXh0KCkpDQogICAgCXsNCiAgICAgICAgdmFyIHRhZ3JlYyA9IHRhZ3JlY3MubmV4dCgpOw0KCXZhciBUYWdJZCA9IHRhZ3JlYy5OYW1lOw0KCXZhciBUYWdUZXh0ID0gdGFncmVjLlNWTVhDX19UYWdfVGV4dF9fYzsNCgl2YXIgTGFuZyA9IHRhZ3JlYy5TVk1YQ19fTGFuZ3VhZ2VfX2M7DQoJaWYgKExhbmcgPT0gIk1hc3RlciIgJiYgIU1zZ0xpc3RbVGFnSWRdKQ0KCSAgICB7DQoJICAgIE1zZ0xpc3RbVGFnSWRdID0gVGFnVGV4dDsNCgkgICAgfQ0KCWVsc2UgaWYgKExhbmcgPT0gVXNlckxhbmcgJiYgVGFnVGV4dCAmJiBUYWdUZXh0Lmxlbmd0aCA+IDApCS8vIFRyYW5zbGF0aW9uIGF2YWlsYWJsZSBpbiB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UNCgkgICAgew0KCSAgICBNc2dMaXN0W1RhZ0lkXSA9IFRhZ1RleHQ7DQoJICAgIH0NCg0KCWZvdW5kID0gdHJ1ZTsNCgl9DQoNCiAgICBpZiAoIWZvdW5kKQ0KCXsJCQ0KCWlmIChzdWJtb2R1bGVpZCA9PSAiU0NPTlNDMyIpDQoJICAgIHsNCgkgICAgTXNnTGlzdFsnTVNHMDAxJ10gPSAnQW4gaW50ZXJuYWwgZXJyb3Igb2NjdXJyZWQgd2hlbiBzYXZpbmcgZGF0YS4gUGxlYXNlIGNvbnRhY3QgeW91ciBTZXJ2aWNlTWF4IGFkbWluaXN0cmF0b3IgdG8gcmVzb2x2ZSB0aGlzLic7DQoJICAgIE1zZ0xpc3RbJ01TRzAwMiddID0gJ0FuIGludGVybmFsIGVycm9yIG9jY3VycmVkIHdoZW4gcmV0cmlldmluZyBkYXRhLiBQbGVhc2UgY29udGFjdCB5b3VyIFNlcnZpY2VNYXggYWRtaW5pc3RyYXRvciB0byByZXNvbHZlIHRoaXMuJzsNCgkgICAgTXNnTGlzdFsnTVNHMDAzJ10gPSAnUGxlYXNlIGVudGVyIGEgdmFsaWQgc3RhcnQgZGF0ZS4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDQnXSA9ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbmQgZGF0ZS4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDUnXSA9ICdTdGFydCBkYXRlIHNob3VsZCBiZSBlYXJsaWVyIHRoYW4gZW5kIGRhdGUuJzsNCgkgICAgTXNnTGlzdFsnTVNHOTk5J10gPSAnQXJlIHlvdSBzdXJlPyc7DQoJICAgIE1zZ0xpc3RbJ0xBQjAwMCddID0gJ1JlbmV3IFNlcnZpY2UgQ29udHJhY3QnOyANCgkgICAgTXNnTGlzdFsnTEFCMDAxJ10gPSAnU3RhcnQgRGF0ZSc7DQoJICAgIE1zZ0xpc3RbJ0xBQjAwMiddID0gJ0VuZCBEYXRlJzsNCgkgICAgTXNnTGlzdFsnTEFCMDAzJ10gPSAnUmVuZXcgQ29udHJhY3QnOw0KCSAgICBNc2dMaXN0WydMQUIwMDQnXSA9ICdDYW5jZWwnOw0KCSAgICB9DQoJZWxzZSBpZiAoc3VibW9kdWxlaWQgPT0gIlNDT05TQzEiKQ0KCSAgICB7DQoJICAgIE1zZ0xpc3RbJ01TRzAwMSddID0gJ0FuIGludGVybmFsIGVycm9yIG9jY3VycmVkIHdoZW4gc2F2aW5nIGRhdGEuIFBsZWFzZSBjb250YWN0IHlvdXIgU2VydmljZU1heCBhZG1pbmlzdHJhdG9yIHRvIHJlc29sdmUgdGhpcy4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDInXSA9ICdBbiBpbnRlcm5hbCBlcnJvciBvY2N1cnJlZCB3aGVuIHJldHJpZXZpbmcgZGF0YS4gUGxlYXNlIGNvbnRhY3QgeW91ciBTZXJ2aWNlTWF4IGFkbWluaXN0cmF0b3IgdG8gcmVzb2x2ZSB0aGlzLic7DQoJICAgIE1zZ0xpc3RbJ01TRzAwMyddID0gJ0Nhbm5vdCBhY3RpdmF0ZSEgVGhpcyBTZXJ2aWNlIENvbnRyYWN0IGhhcyBiZWVuIHJlbmV3ZWQgYWxyZWFkeS4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDQnXSA9ICdEZWFjdGl2YXRpbmcgcHJldmlvdXMgU2VydmljZSBDb250cmFjdHMuLi4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDUnXSA9ICdBY3RpdmF0aW5nIFNlcnZpY2UgQ29udHJhY3QuLi4nOw0KCSAgICBNc2dMaXN0WydMQUIwMDAnXSA9ICdBY3RpdmF0ZSBTZXJ2aWNlIENvbnRyYWN0JzsgDQoJICAgIH0NCgllbHNlIGlmIChzdWJtb2R1bGVpZCA9PSAiU0NPTlNDMiIpCQkJCQkJDQoJICAgIHsNCgkgICAgTXNnTGlzdFsnTVNHMDAxJ10gPSAnQW4gaW50ZXJuYWwgZXJyb3Igb2NjdXJyZWQgd2hlbiBzYXZpbmcgZGF0YS4gUGxlYXNlIGNvbnRhY3QgeW91ciBTZXJ2aWNlTWF4IGFkbWluaXN0cmF0b3IgdG8gcmVzb2x2ZSB0aGlzLic7DQoJICAgIE1zZ0xpc3RbJ01TRzAwMiddID0gJ0FuIGludGVybmFsIGVycm9yIG9jY3VycmVkIHdoZW4gcmV0cmlldmluZyBkYXRhLiBQbGVhc2UgY29udGFjdCB5b3VyIFNlcnZpY2VNYXggYWRtaW5pc3RyYXRvciB0byByZXNvbHZlIHRoaXMuJzsNCgkgICAgTXNnTGlzdFsnTVNHMDAzJ10gPSAnVGhpcyBTZXJ2aWNlIENvbnRyYWN0IGlzIG5vdCBhY3RpdmUuIE9ubHkgQWN0aXZlIENvbnRyYWN0cyBjYW4gYmUgY2FuY2VsZWQuJzsNCgkgICAgTXNnTGlzdFsnTVNHMDA0J10gPSAnQXJlIHlvdSBzdXJlIHRvIGNhbmNlbCB0aGlzIFNlcnZpY2UgQ29udHJhY3Q/JzsNCgkgICAgTXNnTGlzdFsnTVNHMDA1J10gPSAnQ2FuY2VsaW5nIFNlcnZpY2UgQ29udHJhY3QuLi4nOwkJDQoJICAgIE1zZ0xpc3RbJ0xBQjAwMCddID0gJ0NhbmNlbCBTZXJ2aWNlIENvbnRyYWN0JzsgDQoJICAgIH0NCgllbHNlIGlmIChzdWJtb2R1bGVpZCA9PSAiVkFEUlNDMSIpDQoJICAgIHsNCgkgICAgTXNnTGlzdFsnTVNHMDAxJ10gPSAnVW5hYmxlIHRvIGxhdW5jaCBHZW9jb2RlciB0byBjYWxjdWxhdGUgY29vcmRpbmF0ZXMuXG5QbGVhc2UgY29udGFjdCB5b3VyIFNlcnZpY2VNYXggYWRtaW5pc3RyYXRvci4nOw0KCSAgICBNc2dMaXN0WydNU0cwMDInXSA9ICdWYWxpZCBBZGRyZXNzISBMYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ISc7DQoJICAgIE1zZ0xpc3RbJ01TRzAwMyddID0gJ1RoZSBmb2xsb3dpbmcgZXJyb3Igb2NjdXJyZWQgaW4gdXBkYXRpbmcgYWRkcmVzcyBjb29yZGluYXRlczonOw0KCSAgICBNc2dMaXN0WydNU0cwMDQnXSA9ICdVbmFibGUgdG8gY2FsY3VsYXRlIGNvb3JkaW5hdGVzIG9mIHRoaXMgYWRkcmVzcyEnOw0KCSAgICBNc2dMaXN0WydNU0cwMDUnXSA9ICdQbGVhc2UgbWFrZSBzdXJlIHRoZSBhZGRyZXNzIGlzIHZhbGlkLCBkb2VzIG5vdCBjb250YWluIHN1aXRlL3VuaXQgbnVtYmVycywnOw0KCSAgICBNc2dMaXN0WydNU0cwMDYnXSA9ICdhbmQgZG9lcyBub3QgY29udGFpbiBQTyBCb3ggbnVtYmVycy4nOw0KCSAgICBNc2dMaXN0WydMQUIwMDAnXSA9ICdWYWxpZGF0ZSBMb2NhdGlvbiBBZGRyZXNzJzsNCgkgICAgTXNnTGlzdFsnTEFCMDAxJ10gPSAnUGxlYXNlIHdhaXQuLi4nOw0KCSAgICBNc2dMaXN0WydMQUIwMDInXSA9ICdDYWxjdWxhdGUgTGF0aXR1ZGUvTG9uZ2l0dWRlJzsNCgkgICAgfQ0KCWVsc2UNCgkgICAgYWxlcnQoIlVuc3VwcG9ydGVkIHN1Ym1vZHVsZWlkICIgKyBzdWJtb2R1bGVpZCArICIuIFRoaXMgaXMgYSBwcm9ncmFtbWluZyBlcnJvci4iKTsNCgl9DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vIEdldCB0aGUgbWVzc2FnZSBmb3IgdGhlIGdpdmVuIG1lc3NhZ2UgbnVtYmVyIGZyb20gdGhlIGdsb2JhbCBoYXNoIHRhYmxlLg0KLy8gUmV0dXJuICJzZXR1cC1pc3N1ZSIgaWYgdGhlIG1lc3NhZ2UgaXMgbm90IGZvdW5kDQpmdW5jdGlvbiBTVk1YQ19HZXRNZXNzYWdlKE1zZ051bSkNCnsNCiAgICBpZiAoIU1zZ0xpc3RbTXNnTnVtXSkNCiAgICAJcmV0dXJuICJNZXNzYWdlIGRlZmluaXRpb24gZm9yICIgKyBNc2dOdW0gKyAiIG5vdCBmb3VuZC4gVGhpcyBpcyBhIHNldHVwIGlzc3VlLlxuUGxlYXNlIGNvbnRhY3QgeW91ciBTZXJ2aWNlTWF4IGFkbWluaXN0cmF0b3IgdG8gcmVzb2x2ZSB0aGlzLiI7DQoNCiAgICByZXR1cm4gTXNnTGlzdFtNc2dOdW1dOw0KfQ0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQpmdW5jdGlvbiBTVk1YQ19TQ19TZXRMYWJlbHMoZm9ybW5hbWUpDQp7DQoNCmlmIChmb3JtbmFtZSE9bnVsbCkNCgl7DQogICAgdmFyIGxhYmVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsYWJlbCcpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKQ0KCXsNCgkJdmFyIGYgPSBsYWJlbHNbaV07DQoJCWlmIChNc2dMaXN0W2YubmFtZV0pDQoJCQlmLmlubmVyVGV4dCA9IE1zZ0xpc3RbZi5uYW1lXTsNCgl9DQogICAgdmFyIGVsZW1zID0gZG9jdW1lbnQuZm9ybXNbZm9ybW5hbWVdLmVsZW1lbnRzOw0KICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWxlbXMubGVuZ3RoOyBqKyspDQoJew0KCQl2YXIgZiA9IGVsZW1zW2pdOw0KCQlpZiAoKGYudHlwZSA9PSAnYnV0dG9uJyB8fCBmLnR5cGUgPT0gJ2NoZWNrYm94JykgJiYgTXNnTGlzdFtmLm5hbWVdKQ0KCQkJZi52YWx1ZSA9IE1zZ0xpc3RbZi5uYW1lXTsNCgkJfQkNCgl9DQoJaWYgKE1zZ0xpc3RbIkxBQjAwMCJdKQkJDQoJCWRvY3VtZW50LnRpdGxlID0gTXNnTGlzdFsiTEFCMDAwIl07ICAgCQ0KCQlyZXR1cm4gdHJ1ZTsNCn0NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KZnVuY3Rpb24gU1ZNWENfU0NfQ2FuY2VsU2NyZWVuKCkNCnsNCiAgICB2YXIgYW5zID0gY29uZmlybShTVk1YQ19HZXRNZXNzYWdlKCJNU0c5OTkiKSk7DQogICAgaWYgKCFhbnMpIHsgcmV0dXJuOyB9DQogICAgd2luZG93LmNsb3NlKCk7DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vIENoZWNrIGlmIHRoZSBnaXZlbiBmaWVsZCBpcyBibGFuaw0KZnVuY3Rpb24gU1ZNWENfSXNGaWVsZEJsYW5rKGZuYW1lKQ0Kew0KICAgIHZhciBjdGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbmFtZSk7DQoNCiAgICBpZigoY3RsLnR5cGUgPT0gInRleHQiIHx8IGN0bC50eXBlID09ICJoaWRkZW4iKSAmJiAoIWN0bC52YWx1ZSB8fCBjdGwudmFsdWUubGVuZ3RoID09IDApKSB7IHJldHVybiB0cnVlOyB9DQoNCiAgICBpZihjdGwudHlwZSA9PSAic2VsZWN0LW9uZSIgJiYgY3RsLnNlbGVjdGVkSW5kZXggPT0gLTEpIHsgcmV0dXJuIHRydWU7IH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn0NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KLy8gQ2hlY2sgaWYgdGhlIGdpdmVuIGRhdGUgaXMgdmFsaWQgYXMgcGVyIHRoZSB1c2VyJ3MgbG9jYWxlDQpmdW5jdGlvbiBTVk1YQ19Jc1ZhbGlkRGF0ZShmbmFtZSkNCnsNCiAgICB2YXIgY3RsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm5hbWUpOw0KICAgIHJldHVybihEYXRlVXRpbC5pc0RhdGUoY3RsLnZhbHVlLCB3aW5kb3cub3BlbmVyLlVzZXJDb250ZXh0LmRhdGVGb3JtYXQpKTsNCn0NCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KZnVuY3Rpb24gU1ZNWENfU0NfUmVuZXdTZXJ2aWNlQ29udHJhY3Qob2xkQ29udHJhY3RJZCkNCnsNCiAgICB2YXIgRXJyTXNnID0gIiI7DQogICAgdmFyIHJlY192YWxpZCA9IHRydWU7DQoNCiAgICBpZiAoU1ZNWENfSXNGaWVsZEJsYW5rKCJzdGFydF9kYXRlIikgfHwgIVNWTVhDX0lzVmFsaWREYXRlKCJzdGFydF9kYXRlIikpDQogICAgCXsNCglyZWNfdmFsaWQgPSBmYWxzZTsNCglpZiAoRXJyTXNnLmxlbmd0aCA+IDApIHsgRXJyTXNnICs9ICI8YnI+IjsgfQ0KCUVyck1zZyArPSBTVk1YQ19HZXRNZXNzYWdlKCJNU0cwMDMiKTsNCgl9DQoNCiAgICBpZiAoU1ZNWENfSXNGaWVsZEJsYW5rKCJlbmRfZGF0ZSIpIHx8ICFTVk1YQ19Jc1ZhbGlkRGF0ZSgiZW5kX2RhdGUiKSkNCiAgICAJew0KCXJlY192YWxpZCA9IGZhbHNlOw0KCWlmIChFcnJNc2cubGVuZ3RoID4gMCkgeyBFcnJNc2cgKz0gIjxicj4iOyB9DQoJRXJyTXNnICs9IFNWTVhDX0dldE1lc3NhZ2UoIk1TRzAwNCIpOw0KCX0NCg0KICAgIHZhciBzdHJTdGFydERhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhcnRfZGF0ZSIpLnZhbHVlOw0KICAgIHZhciBzdHJFbmREYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVuZF9kYXRlIikudmFsdWU7DQogICAgdmFyIGR0U3RhcnREYXRlID0gU1ZNWENfR2V0RGF0ZUZyb21Gb3JtYXQoc3RyU3RhcnREYXRlLCB3aW5kb3cub3BlbmVyLlVzZXJDb250ZXh0LmRhdGVGb3JtYXQpOw0KICAgIHZhciBkdEVuZERhdGUgPSBTVk1YQ19HZXREYXRlRnJvbUZvcm1hdChzdHJFbmREYXRlLCB3aW5kb3cub3BlbmVyLlVzZXJDb250ZXh0LmRhdGVGb3JtYXQpOw0KDQogICAgaWYgKGR0U3RhcnREYXRlID4gZHRFbmREYXRlKQ0KICAgIAl7DQoJcmVjX3ZhbGlkID0gZmFsc2U7DQoJaWYgKEVyck1zZy5sZW5ndGggPiAwKSB7IEVyck1zZyArPSAiPGJyPiI7IH0NCglFcnJNc2cgKz0gU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDA1Iik7DQoJfQ0KDQogICAgaWYgKCFyZWNfdmFsaWQpIA0KCXsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiRXJyTXNnIikuc3R5bGUuYm9yZGVyID0gIiNGRjAwMDAgMnB4IHNvbGlkIjsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiRXJyTXNnIikuaW5uZXJIVE1MID0gIjxzdHJvbmc+RXJyb3I6IDwvc3Ryb25nPjxicj4iICsgRXJyTXNnOw0KCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJFcnJNc2ciKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCglyZXR1cm4gZmFsc2U7DQoJfQ0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJFcnJNc2ciKS5zdHlsZS5ib3JkZXIgPSAiMCI7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkVyck1zZyIpLmlubmVySFRNTCA9ICIiOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJFcnJNc2ciKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgdmFyIG5ld0NvbnRyYWN0SWQgPSBTVk1YQ19DcmVhdGVTZXJ2aWNlQ29udHJhY3Qob2xkQ29udHJhY3RJZCwgIlNWTVhDX19TZXJ2aWNlX0NvbnRyYWN0X19jIik7DQogICAgaWYgKG5ld0NvbnRyYWN0SWQpDQogICAgCXsNCglTVk1YQ19jbG9uZVJlZkxpc3QoIlNWTVhDX19TZXJ2aWNlX0NvbnRyYWN0X1Byb2R1Y3RzX19jIiwgb2xkQ29udHJhY3RJZCwgbmV3Q29udHJhY3RJZCwgIlNWTVhDX19TZXJ2aWNlX0NvbnRyYWN0X19jIik7DQoJU1ZNWENfY2xvbmVSZWZMaXN0KCJTVk1YQ19fU2VydmljZV9Db250cmFjdF9Db250YWN0c19fYyIsIG9sZENvbnRyYWN0SWQsIG5ld0NvbnRyYWN0SWQsICJTVk1YQ19fU2VydmljZV9Db250cmFjdF9fYyIpOw0KCVNWTVhDX2Nsb25lUmVmTGlzdCgiU1ZNWENfX1NlcnZpY2VfQ29udHJhY3RfU2l0ZXNfX2MiLCBvbGRDb250cmFjdElkLCBuZXdDb250cmFjdElkLCAiU1ZNWENfX1NlcnZpY2VfQ29udHJhY3RfX2MiKTsNCglTVk1YQ19jbG9uZVJlZkxpc3QoIlNWTVhDX19TZXJ2aWNlX0NvbnRyYWN0X1NlcnZpY2VzX19jIiwgb2xkQ29udHJhY3RJZCwgbmV3Q29udHJhY3RJZCwgIlNWTVhDX19TZXJ2aWNlX0NvbnRyYWN0X19jIik7DQoJd2luZG93Lm9wZW5lci5sb2NhdGlvbiA9ICIvIiArIG5ld0NvbnRyYWN0SWQ7DQoJfQ0KICAgIHdpbmRvdy5jbG9zZSgpOw0KfQ0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQpmdW5jdGlvbiBTVk1YQ19DcmVhdGVTZXJ2aWNlQ29udHJhY3QoQ29udHJhY3RJZCwgb2JqKQ0Kew0KICAgIC8vIEJ1aWxkIGEgU0VMRUNUIGNvbW1hbmQgdXNpbmcgYWxsIGZpZWxkIG5hbWVzIGluIHRoZSBvYmplY3QNCiAgICB2YXIgcWZpZWxkcyA9IiI7DQogICAgdmFyIHJlc3VsdCA9IHNmb3JjZS5jb25uZWN0aW9uLmRlc2NyaWJlU09iamVjdChvYmopOw0KICAgIGZvciAodmFyIGk9MDsgaTxyZXN1bHQuZmllbGRzLmxlbmd0aDsgaSsrKSB7DQoJdmFyIGZpZWxkID0gcmVzdWx0LmZpZWxkc1tpXTsNCglpZiAoKGZpZWxkLmNyZWF0ZWFibGUpICYmIChmaWVsZC51cGRhdGVhYmxlKSAmJiAoZmllbGQubmFtZSAhPSAiSWQiKSkgew0KCSAgICBxZmllbGRzID0gcWZpZWxkcyArIGZpZWxkLm5hbWUgKyAiLCAiDQoJfQ0KICAgIH0NCiAgICB2YXIgc29xbCA9ICJTRUxFQ1QgIiArIHFmaWVsZHMgKyAiIElkIEZST00gIiArIG9iaiArICIgV0hFUkUgaWQgPSAnIisgQ29udHJhY3RJZCArIiciOw0KICAgIHZhciBxdWVyeVJlc3VsdCA9IHNmb3JjZS5jb25uZWN0aW9uLnF1ZXJ5KHNvcWwpOyANCiAgICBpZiAocXVlcnlSZXN1bHQuc2l6ZSA8PSAwKQ0KCXsNCglhbGVydCgiVW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gVGhlIHNlcnZpY2UgY29udHJhY3Qgd2FzIG5vdCBmb3VuZC5cblBsZWFzZSByZXBvcnQgdGhpcyBlcnJvciB0byBTZXJ2aWNlTWF4IHN1cHBvcnQuIik7DQoJcmV0dXJuIG51bGw7DQoJfQ0KICAgIHZhciByZWNvcmRzID0gcXVlcnlSZXN1bHQuZ2V0QXJyYXkoInJlY29yZHMiKTsNCg0KICAgIC8vIENvcHkgZmllbGRzIGZyb20gb2xkIFNlcnZpY2UgQ29udHJhY3QgdG8gdGhlIG5ldyBvbmUNCiAgICB2YXIgTmV3U0MgPSBuZXcgc2ZvcmNlLlNPYmplY3Qob2JqKTsNCg0KICAgIE5ld1NDLk5hbWUgPSByZWNvcmRzWzBdLk5hbWU7DQogICAgTmV3U0MuU1ZNWENfX0NvbXBhbnlfX2MgPSByZWNvcmRzWzBdLlNWTVhDX19Db21wYW55X19jOw0KICAgIE5ld1NDLlNWTVhDX19Db250YWN0X19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQ29udGFjdF9fYzsNCiAgICBOZXdTQy5TVk1YQ19fQ29udHJhY3RfUHJpY2UyX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQ29udHJhY3RfUHJpY2UyX19jOw0KICAgIE5ld1NDLlNWTVhDX19EaXNjb3VudF9fYyA9IHJlY29yZHNbMF0uU1ZNWENfX0Rpc2NvdW50X19jOw0KICAgLy8gTmV3U0MuU1ZNWENfX0Rpc2NvdW50ZWRfUHJpY2UyX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fRGlzY291bnRlZF9QcmljZTJfX2M7DQogICAgTmV3U0MuU1ZNWENfX1NhbGVzX1JlcF9fYyA9IHJlY29yZHNbMF0uU1ZNWENfX1NhbGVzX1JlcF9fYzsNCiAgICBOZXdTQy5TVk1YQ19fU2VydmljZV9Db250cmFjdF9Ob3Rlc19fYyA9IHJlY29yZHNbMF0uU1ZNWENfX1NlcnZpY2VfQ29udHJhY3RfTm90ZXNfX2M7DQogICAgTmV3U0MuU1ZNWENfX1NlcnZpY2VfTGV2ZWxfX2MgPSByZWNvcmRzWzBdLlNWTVhDX19TZXJ2aWNlX0xldmVsX19jOw0KICAgIE5ld1NDLlNWTVhDX19TdGFydF9EYXRlX19jID0gU1ZNWENfQ29udmVydFRvU0ZEQ0RhdGVGb3JtYXQoInN0YXJ0X2RhdGUiKTsNCiAgICBOZXdTQy5TVk1YQ19fRW5kX0RhdGVfX2MgPSBTVk1YQ19Db252ZXJ0VG9TRkRDRGF0ZUZvcm1hdCgiZW5kX2RhdGUiKTsNCiAgICB2YXIgY3VyZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgTmV3U0MuU1ZNWENfX1JlbmV3YWxfRGF0ZV9fYyA9IFNWTVhDX0NvbnZlcnREYXRlVG9TRkRDKGN1cmRhdGUpOw0KICAgIGlmIChyZWNvcmRzWzBdLlNWTVhDX19SZW5ld2FsX051bWJlcl9fYyA9PSBudWxsKQ0KCU5ld1NDLlNWTVhDX19SZW5ld2FsX051bWJlcl9fYyA9IDE7DQogICAgZWxzZQ0KCU5ld1NDLlNWTVhDX19SZW5ld2FsX051bWJlcl9fYyA9IHBhcnNlSW50KHJlY29yZHNbMF0uU1ZNWENfX1JlbmV3YWxfTnVtYmVyX19jKSArIDE7DQogICAgTmV3U0MuU1ZNWENfX1JlbmV3ZWRfRnJvbV9fYyA9IENvbnRyYWN0SWQ7DQogICAgTmV3U0MuU1ZNWENfX0FjdGl2ZV9fYyA9ICJmYWxzZSI7DQogICAgTmV3U0MuU1ZNWENfX0FsbF9Db250YWN0c19Db3ZlcmVkX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQWxsX0NvbnRhY3RzX0NvdmVyZWRfX2M7DQogICAgTmV3U0MuU1ZNWENfX0FsbF9Qcm9kdWN0c19Db3ZlcmVkX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQWxsX1Byb2R1Y3RzX0NvdmVyZWRfX2M7DQogICAgTmV3U0MuU1ZNWENfX0FsbF9TZXJ2aWNlc19Db3ZlcmVkX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQWxsX1NlcnZpY2VzX0NvdmVyZWRfX2M7DQogICAgTmV3U0MuU1ZNWENfX0FsbF9TaXRlc19Db3ZlcmVkX19jID0gcmVjb3Jkc1swXS5TVk1YQ19fQWxsX1NpdGVzX0NvdmVyZWRfX2M7DQogICAgTmV3U0MuU1ZNWENfX0JpbGxpbmdfU2NoZWR1bGVfX2MgPSByZWNvcmRzWzBdLlNWTVhDX19CaWxsaW5nX1NjaGVkdWxlX19jOw0KICAgIHRyeSB7DQoJdmFyIHJldCA9IHNmb3JjZS5jb25uZWN0aW9uLmNyZWF0ZShbTmV3U0NdKTsgDQoJCWlmIChyZXRbMF0uZ2V0Qm9vbGVhbigic3VjY2VzcyIpKSAvL0J5IEdtIDBuIDEwRmViMDkNCgkgICAgew0KCQkJcmV0dXJuIHJldFswXS5pZDsgICAgICAgICAgICAgICAgDQoJICAgIH0gDQoJICAgIGVsc2UgDQoJICAgIHsNCgkJCWFsZXJ0KHJldFswXS5lcnJvcnMubWVzc2FnZSk7DQoJICAgICAgICByZXR1cm4gbnVsbDsNCgkgICAgfSANCgl9DQogICAgY2F0Y2goZXJyb3IpDQoJew0KCWFsZXJ0KFNWTVhDX0dldE1lc3NhZ2UoIk1TRzAwMSIpICsgIlxuIiArIGVycm9yKTsNCglyZXR1cm4gbnVsbDsNCgl9DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCmZ1bmN0aW9uIFNWTVhDX2Nsb25lUmVmTGlzdChvYmpOYW1lLCBvbGRJZCwgbmV3SWQsIHJlZkZpZWxkTmFtZSkNCnsNCiAgICB2YXIgcWZpZWxkcyA9IiI7DQogICAgdmFyIHJlc3VsdCA9IHNmb3JjZS5jb25uZWN0aW9uLmRlc2NyaWJlU09iamVjdChvYmpOYW1lKTsNCiAgICBmb3IgKHZhciBpPTA7IGk8cmVzdWx0LmZpZWxkcy5sZW5ndGg7IGkrKykgew0KCXZhciBmaWVsZCA9IHJlc3VsdC5maWVsZHNbaV07DQoJaWYgKChmaWVsZC5jcmVhdGVhYmxlKSAmJiAoZmllbGQudXBkYXRlYWJsZSkgJiYgKGZpZWxkLm5hbWUgIT0gIklkIikpIHsNCglxZmllbGRzID0gcWZpZWxkcyArIGZpZWxkLm5hbWUgKyAiLCAiDQoJfQ0KICAgIH0NCiAgICB2YXIgc29xbCA9ICJTRUxFQ1QgIiArIHFmaWVsZHMgKyAiIElkIEZST00gIiArIG9iak5hbWUgKyAiIFdIRVJFICIgKyByZWZGaWVsZE5hbWUgKyAiID0gJyIgKyBvbGRJZCArICInIjsNCiAgICB2YXIgcXVlcnlSZXN1bHQgPSBzZm9yY2UuY29ubmVjdGlvbi5xdWVyeShzb3FsKTsgDQogICAgdmFyIHJlY29yZHMgPSBxdWVyeVJlc3VsdC5nZXRBcnJheSgicmVjb3JkcyIpOw0KDQogICAgZm9yICh2YXIgYT0wOyBhPHJlY29yZHMubGVuZ3RoOyBhKyspDQoJew0KCXZhciBOZXdPYmogPSBuZXcgc2ZvcmNlLlNPYmplY3Qob2JqTmFtZSk7DQoJZm9yICh2YXIgaT0wOyBpPHJlc3VsdC5maWVsZHMubGVuZ3RoOyBpKyspIHsNCgkgICAgdmFyIGZpZWxkID0gcmVzdWx0LmZpZWxkc1tpXTsNCgkgICAgaWYgKChmaWVsZC5jYWxjdWxhdGVkID09ICJmYWxzZSIpICYmIChmaWVsZC5jcmVhdGVhYmxlID09ICJ0cnVlIikgJiYgKGZpZWxkLm5hbWUgIT0gIklkIikpIHsNCgkJCQlOZXdPYmouc2V0KGZpZWxkLm5hbWUsIHJlY29yZHNbYV0uZ2V0KGZpZWxkLm5hbWUpKTsNCgkgICAgfQ0KCX0NCglOZXdPYmouc2V0KHJlZkZpZWxkTmFtZSwgbmV3SWQpOw0KCXRyeSB7DQoJICAgIHZhciByZXQgPSBzZm9yY2UuY29ubmVjdGlvbi5jcmVhdGUoW05ld09ial0pOw0KCSAgICB9DQoJY2F0Y2goZXJyb3IpDQoJICAgIHsNCgkgICAgYWxlcnQoU1ZNWENfR2V0TWVzc2FnZSgiTVNHMDAxIikpOw0KCSAgICByZXR1cm4gZmFsc2U7DQoJICAgIH0NCgl9DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vIFRoaXMgZnVuY3Rpb24gaXMgYSBoYWNrIGZyb20gU0ZEQyBsaWJyYXJ5LiBJdCByZXR1cm5zIGEgamF2YXNjcmlwdCBEYXRlIHZhcmlhYmxlDQovLyBmb3IgYSBkYXRlIHZhbHVlIGluIHRoZSBnaXZlbiBmb3JtYXQuIFRoZSBTRkRDIHJvdXRpbmUgcmV0dXJucyB0aGUgdGltZSBwYXJ0IHdoaWNoIHdlIGRvbid0IHdhbnQuDQpmdW5jdGlvbiBTVk1YQ19HZXREYXRlRnJvbUZvcm1hdCh2YWwsZm9ybWF0KQ0Kew0KCXZhbD12YWwrIiI7DQoJZm9ybWF0PWZvcm1hdCsiIjsNCgl2YXIgaV92YWw9MDsNCgl2YXIgaV9mb3JtYXQ9MDsNCgl2YXIgYz0iIjsNCgl2YXIgdG9rZW49IiI7DQoJdmFyIHRva2VuMj0iIjsNCgl2YXIgeCx5Ow0KCXZhciBub3c9bmV3IERhdGUoKTsNCgl2YXIgeWVhcj1ub3cuZ2V0WWVhcigpOw0KCXZhciBtb250aD1ub3cuZ2V0TW9udGgoKSsxOw0KCXZhciBkYXRlPTE7DQoJdmFyIGhoPW5vdy5nZXRIb3VycygpOw0KCXZhciBtbT1ub3cuZ2V0TWludXRlcygpOw0KCXZhciBzcz1ub3cuZ2V0U2Vjb25kcygpOw0KCXZhciBhbXBtPSIiOw0KCQ0KCXdoaWxlIChpX2Zvcm1hdCA8IGZvcm1hdC5sZW5ndGgpIHsNCgkJLy8gR2V0IG5leHQgdG9rZW4gZnJvbSBmb3JtYXQgc3RyaW5nDQoJCWM9Zm9ybWF0LmNoYXJBdChpX2Zvcm1hdCk7DQoJCXRva2VuPSIiOw0KCQl3aGlsZSAoKGZvcm1hdC5jaGFyQXQoaV9mb3JtYXQpPT1jKSAmJiAoaV9mb3JtYXQgPCBmb3JtYXQubGVuZ3RoKSkgew0KCQkJdG9rZW4gKz0gZm9ybWF0LmNoYXJBdChpX2Zvcm1hdCsrKTsNCgkJCX0NCgkJLy8gRXh0cmFjdCBjb250ZW50cyBvZiB2YWx1ZSBiYXNlZCBvbiBmb3JtYXQgdG9rZW4NCgkJaWYgKHRva2VuPT0ieXl5eSIgfHwgdG9rZW49PSJ5eSIgfHwgdG9rZW49PSJ5Iikgew0KCQkJaWYgKHRva2VuPT0ieXl5eSIpIHsgeD0yO3k9NDsgfSAvLyB4PTIseT00IHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBqYXZhLg0KCQkJaWYgKHRva2VuPT0ieXkiKSAgIHsgeD0yO3k9MjsgfQ0KCQkJaWYgKHRva2VuPT0ieSIpICAgIHsgeD0yO3k9NDsgfQ0KCQkJeWVhcj1EYXRlVXRpbC5fZ2V0SW50KHZhbCxpX3ZhbCx4LHkpOw0KCQkJaWYgKHllYXI9PW51bGwpIHsgcmV0dXJuIDA7IH0NCgkJCWlfdmFsICs9IHllYXIubGVuZ3RoOw0KCQkJaWYgKHllYXIubGVuZ3RoPT0yKSB7DQoJCQkJaWYgKHllYXIgPiA3MCkgeyB5ZWFyPTE5MDArKHllYXItMCk7IH0NCgkJCQllbHNlIHsgeWVhcj0yMDAwKyh5ZWFyLTApOyB9DQoJCQkJfQ0KCQkJfQ0KCQllbHNlIGlmICh0b2tlbj09Ik1NTSJ8fHRva2VuPT0iTk5OIil7DQoJCQltb250aD0wOw0KCQkJZm9yICh2YXIgaT0wOyBpPERhdGVVdGlsLk1PTlRIX05BTUVTLmxlbmd0aDsgaSsrKSB7DQoJCQkJdmFyIG1vbnRoX25hbWU9RGF0ZVV0aWwuTU9OVEhfTkFNRVNbaV07DQoJCQkJaWYgKHZhbC5zdWJzdHJpbmcoaV92YWwsaV92YWwrbW9udGhfbmFtZS5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PW1vbnRoX25hbWUudG9Mb3dlckNhc2UoKSkgew0KCQkJCQlpZiAodG9rZW49PSJNTU0ifHwodG9rZW49PSJOTk4iJiZpPjExKSkgew0KCQkJCQkJbW9udGg9aSsxOw0KCQkJCQkJaWYgKG1vbnRoPjEyKSB7IG1vbnRoIC09IDEyOyB9DQoJCQkJCQlpX3ZhbCArPSBtb250aF9uYW1lLmxlbmd0aDsNCgkJCQkJCWJyZWFrOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfQ0KCQkJaWYgKChtb250aCA8IDEpfHwobW9udGg+MTIpKXtyZXR1cm4gMDt9DQoJCQl9DQoJCWVsc2UgaWYgKHRva2VuPT0iRUUifHx0b2tlbj09IkUiKXsNCgkJCWZvciAodmFyIGk9MDsgaTxEYXRlVXRpbC5EQVlfTkFNRVMubGVuZ3RoOyBpKyspIHsNCgkJCQl2YXIgZGF5X25hbWU9RGF0ZVV0aWwuREFZX05BTUVTW2ldOw0KCQkJCWlmICh2YWwuc3Vic3RyaW5nKGlfdmFsLGlfdmFsK2RheV9uYW1lLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09ZGF5X25hbWUudG9Mb3dlckNhc2UoKSkgew0KCQkJCQlpX3ZhbCArPSBkYXlfbmFtZS5sZW5ndGg7DQoJCQkJCWJyZWFrOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQllbHNlIGlmICh0b2tlbj09Ik1NInx8dG9rZW49PSJNIikgew0KCQkJbW9udGg9RGF0ZVV0aWwuX2dldEludCh2YWwsaV92YWwsMSwyKTsgLy8gQWx3YXlzIHVzZSBtaW4gbGVuIDEgdG8gYmUgbGVuaWVudC4NCgkJCWlmKG1vbnRoPT1udWxsfHwobW9udGg8MSl8fChtb250aD4xMikpe3JldHVybiAwO30NCgkJCWlfdmFsKz1tb250aC5sZW5ndGg7fQ0KCQllbHNlIGlmICh0b2tlbj09ImRkInx8dG9rZW49PSJkIikgew0KCQkJZGF0ZT1EYXRlVXRpbC5fZ2V0SW50KHZhbCxpX3ZhbCwxLDIpOyAvLyBBbHdheXMgdXNlIG1pbiBsZW4gMSB0byBiZSBsZW5pZW50Lg0KCQkJaWYoZGF0ZT09bnVsbHx8KGRhdGU8MSl8fChkYXRlPjMxKSl7cmV0dXJuIDA7fQ0KCQkJaV92YWwrPWRhdGUubGVuZ3RoO30NCgkJZWxzZSBpZiAodG9rZW49PSJoaCJ8fHRva2VuPT0iaCIpIHsNCgkJCWhoPURhdGVVdGlsLl9nZXRJbnQodmFsLGlfdmFsLHRva2VuLmxlbmd0aCwyKTsNCgkJCWlmKGhoPT1udWxsfHwoaGg8MSl8fChoaD4xMikpe3JldHVybiAwO30NCgkJCWlfdmFsKz1oaC5sZW5ndGg7fQ0KCQllbHNlIGlmICh0b2tlbj09IkhIInx8dG9rZW49PSJIIikgew0KCQkJaGg9RGF0ZVV0aWwuX2dldEludCh2YWwsaV92YWwsdG9rZW4ubGVuZ3RoLDIpOw0KCQkJaWYoaGg9PW51bGx8fChoaDwwKXx8KGhoPjIzKSl7cmV0dXJuIDA7fQ0KCQkJaV92YWwrPWhoLmxlbmd0aDt9DQoJCWVsc2UgaWYgKHRva2VuPT0iS0sifHx0b2tlbj09IksiKSB7DQoJCQloaD1EYXRlVXRpbC5fZ2V0SW50KHZhbCxpX3ZhbCx0b2tlbi5sZW5ndGgsMik7DQoJCQlpZihoaD09bnVsbHx8KGhoPDApfHwoaGg+MTEpKXtyZXR1cm4gMDt9DQoJCQlpX3ZhbCs9aGgubGVuZ3RoO30NCgkJZWxzZSBpZiAodG9rZW49PSJrayJ8fHRva2VuPT0iayIpIHsNCgkJCWhoPURhdGVVdGlsLl9nZXRJbnQodmFsLGlfdmFsLHRva2VuLmxlbmd0aCwyKTsNCgkJCWlmKGhoPT1udWxsfHwoaGg8MSl8fChoaD4yNCkpe3JldHVybiAwO30NCgkJCWlfdmFsKz1oaC5sZW5ndGg7aGgtLTt9DQoJCWVsc2UgaWYgKHRva2VuPT0ibW0ifHx0b2tlbj09Im0iKSB7DQoJCQltbT1EYXRlVXRpbC5fZ2V0SW50KHZhbCxpX3ZhbCx0b2tlbi5sZW5ndGgsMik7DQoJCQlpZihtbT09bnVsbHx8KG1tPDApfHwobW0+NTkpKXtyZXR1cm4gMDt9DQoJCQlpX3ZhbCs9bW0ubGVuZ3RoO30NCgkJZWxzZSBpZiAodG9rZW49PSJzcyJ8fHRva2VuPT0icyIpIHsNCgkJCXNzPURhdGVVdGlsLl9nZXRJbnQodmFsLGlfdmFsLHRva2VuLmxlbmd0aCwyKTsNCgkJCWlmKHNzPT1udWxsfHwoc3M8MCl8fChzcz41OSkpe3JldHVybiAwO30NCgkJCWlfdmFsKz1zcy5sZW5ndGg7fQ0KCQllbHNlIGlmICh0b2tlbj09ImEiKSB7DQoJCSAgICB2YXIgYW0gPSBEYXRlVXRpbC5nZXRBTVN5bWJvbCgpOw0KCQkgICAgdmFyIHBtID0gRGF0ZVV0aWwuZ2V0UE1TeW1ib2woKTsNCgkJICAgIHZhciBzdHJhID0gdmFsLnN1YnN0cmluZyhpX3ZhbCwgaV92YWwgKyBhbS5sZW5ndGgpOw0KCQkgICAgdmFyIHN0cnAgPSB2YWwuc3Vic3RyaW5nKGlfdmFsLCBpX3ZhbCArIHBtLmxlbmd0aCk7DQoJCQlpZiAoc3RyYSA9PSBhbSB8fCBzdHJhLnRvVXBwZXJDYXNlKCkgPT0gYW0pIHsNCgkJCSAgICBhbXBtID0gYW07DQoJCQl9IGVsc2UgaWYgKHN0cnAgPT0gcG0gfHwgc3RycC50b1VwcGVyQ2FzZSgpID09IHBtKSB7DQoJCQkgICAgYW1wbSA9IHBtOw0KCQkJfSBlbHNlIHsNCgkJCSAgICByZXR1cm4gMDsNCgkJICAgIH0NCiAgICAgICAgICAgICAgICBpX3ZhbCArPSBhbXBtLmxlbmd0aDsNCgkJfQ0KCQllbHNlIHsNCgkJCWlmICh2YWwuc3Vic3RyaW5nKGlfdmFsLGlfdmFsK3Rva2VuLmxlbmd0aCkhPXRva2VuKSB7cmV0dXJuIDA7fQ0KCQkJZWxzZSB7aV92YWwrPXRva2VuLmxlbmd0aDt9DQoJCQl9DQoJCX0NCgkvLyBJZiB0aGVyZSBhcmUgYW55IHRyYWlsaW5nIGNoYXJhY3RlcnMgbGVmdCBpbiB0aGUgdmFsdWUsIGl0IGRvZXNuJ3QgbWF0Y2gNCglpZiAoaV92YWwgIT0gdmFsLmxlbmd0aCkgeyByZXR1cm4gMDsgfQ0KCS8vIElzIGRhdGUgdmFsaWQgZm9yIG1vbnRoPw0KCWlmIChtb250aD09Mikgew0KCQkvLyBDaGVjayBmb3IgbGVhcCB5ZWFyDQoJCWlmICggKCAoeWVhciU0PT0wKSYmKHllYXIlMTAwICE9IDApICkgfHwgKHllYXIlNDAwPT0wKSApIHsgLy8gbGVhcCB5ZWFyDQoJCQlpZiAoZGF0ZSA+IDI5KXsgcmV0dXJuIDA7IH0NCgkJCX0NCgkJZWxzZSB7IGlmIChkYXRlID4gMjgpIHsgcmV0dXJuIDA7IH0gfQ0KCQl9DQoJaWYgKChtb250aD09NCl8fChtb250aD09Nil8fChtb250aD09OSl8fChtb250aD09MTEpKSB7DQoJCWlmIChkYXRlID4gMzApIHsgcmV0dXJuIDA7IH0NCgkJfQ0KCS8vIENvcnJlY3QgaG91cnMgdmFsdWUNCglpZiAoaGg8MTIgJiYgYW1wbSA9PSBEYXRlVXRpbC5nZXRQTVN5bWJvbCgpKSB7IGhoPWhoLTArMTI7IH0NCgllbHNlIGlmIChoaD4xMSAmJiBhbXBtID09IERhdGVVdGlsLmdldEFNU3ltYm9sKCkpIHsgaGgtPTEyOyB9DQoJdmFyIG5ld2RhdGU9bmV3IERhdGUoeWVhcixtb250aC0xLGRhdGUsaGgsbW0sc3MpOw0KCXJldHVybiBuZXdkYXRlOw0KfQ0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KLy8gQ29udmVydCBhIGRhdGUgZnJvbSB1c2VyJ3MgbG9jYWwgZm9ybWF0IHRvIFNGREMncyBmb3JtYXQgKFlZWVktTU0tREQpDQpmdW5jdGlvbiBTVk1YQ19Db252ZXJ0VG9TRkRDRGF0ZUZvcm1hdChjdGxuYW1lKQ0Kew0KICAgIHZhciBkdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGN0bG5hbWUpLnZhbHVlOw0KICAgIGlmIChkdC5sZW5ndGggPD0gMCkgcmV0dXJuIG51bGw7DQoNCiAgICB2YXIgZCA9IFNWTVhDX0dldERhdGVGcm9tRm9ybWF0KGR0LCB3aW5kb3cub3BlbmVyLlVzZXJDb250ZXh0LmRhdGVGb3JtYXQpOw0KDQogICAgdmFyIG1vbiA9IHBhcnNlSW50KGQuZ2V0TW9udGgoKSkgKyAxOw0KICAgIGlmIChtb24gPCAxMCkgeyBtb24gPSAiMCIgKyBtb247IH0NCg0KICAgIHZhciBkYXkgPSBwYXJzZUludChkLmdldERhdGUoKSk7DQogICAgaWYgKGRheSA8IDEwKSB7IGRheSA9ICIwIiArIGRheTsgfQ0KDQogICAgdmFyIGR0cyA9IGQuZ2V0RnVsbFllYXIoKSArICItIiArIG1vbiArICItIiArIGRheTsNCg0KICAgIHJldHVybiBkdHM7DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQovLyBDb252ZXJ0IGEgRGF0ZSB2YXJpYWJsZSB0byBTRkRDIGRhdGUgZm9ybWF0DQpmdW5jdGlvbiBTVk1YQ19Db252ZXJ0RGF0ZVRvU0ZEQyhkYXRldmFsKQ0Kew0KICAgIHZhciBtb24gPSBwYXJzZUludChkYXRldmFsLmdldE1vbnRoKCkpICsgMTsNCiAgICBpZiAobW9uIDwgMTApIHsgbW9uID0gIjAiICsgbW9uOyB9DQoNCiAgICB2YXIgZGF5ID0gcGFyc2VJbnQoZGF0ZXZhbC5nZXREYXRlKCkpOw0KICAgIGlmIChkYXkgPCAxMCkgeyBkYXkgPSAiMCIgKyBkYXk7IH0NCg0KICAgIHZhciBkdHMgPSBkYXRldmFsLmdldEZ1bGxZZWFyKCkgKyAiLSIgKyBtb24gKyAiLSIgKyBkYXk7DQoNCiAgICByZXR1cm4gZHRzOw0KfQ0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KZnVuY3Rpb24gU1ZNWENfR2V0Q3VycmVudFRpbWUoKQ0Kew0KICAgIHZhciBzZXJ2ZXJUaW1lID0gc2ZvcmNlLmNvbm5lY3Rpb24uZ2V0U2VydmVyVGltZXN0YW1wKCk7DQogICAgcmV0dXJuIHNlcnZlclRpbWUudGltZXN0YW1wOw0KfQ0K</fileContent>
    <fileName>SVMXC_Library.js</fileName>
    <name>SVMXC_RenewServiceContract</name>
    <supportsCaching>true</supportsCaching>
</Scontrol>
